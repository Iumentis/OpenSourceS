-- SIMPLEST GAME SCANNER - WON'T CRASH
print("üì° SIMPLE GAME SCAN")
print("=" .. string.rep("=", 40))

local info = {}

-- 1. BASIC GAME INFO
table.insert(info, "GAME INFO:")
table.insert(info, "PlaceId: " .. tostring(game.PlaceId))
table.insert(info, "JobId: " .. tostring(game.JobId))
table.insert(info, "")

-- 2. PLAYERS (most important)
local playersSuccess, players = pcall(function() return game:GetService("Players") end)
if playersSuccess and players then
    table.insert(info, "PLAYERS:")
    local allPlayers = players:GetPlayers()
    table.insert(info, "Total: " .. #allPlayers)
    
    local me = players.LocalPlayer
    if me then
        table.insert(info, "You: " .. me.Name)
        table.insert(info, "UserId: " .. tostring(me.UserId))
        
        -- Check character
        if me.Character then
            table.insert(info, "Character: YES")
            
            -- Check for ONE tool only (no loops that could crash)
            local charChildren = me.Character:GetChildren()
            if #charChildren > 0 then
                for i = 1, math.min(3, #charChildren) do
                    local child = charChildren[i]
                    if child:IsA("Tool") then
                        table.insert(info, "Tool: " .. child.Name)
                        break  -- Only show first tool
                    end
                end
            end
        else
            table.insert(info, "Character: NO")
        end
    end
    table.insert(info, "")
end

-- 3. WORKSPACE (limited)
local wsSuccess, workspace = pcall(function() return game:GetService("Workspace") end)
if wsSuccess and workspace then
    table.insert(info, "WORKSPACE:")
    local children = workspace:GetChildren()
    table.insert(info, "Items: " .. #children)
    
    -- Show ONLY first 3 important items
    local shown = 0
    for i = 1, math.min(5, #children) do
        local child = children[i]
        if child:IsA("Model") or child:IsA("Tool") then
            table.insert(info, "  ‚Ä¢ " .. child.Name .. " (" .. child.ClassName .. ")")
            shown = shown + 1
            if shown >= 3 then break end
        end
    end
    table.insert(info, "")
end

-- 4. REPLICATEDSTORAGE (just count remotes)
local rsSuccess, rs = pcall(function() return game:GetService("ReplicatedStorage") end)
if rsSuccess and rs then
    table.insert(info, "REPLICATEDSTORAGE:")
    local children = rs:GetChildren()
    table.insert(info, "Items: " .. #children)
    
    -- Count remotes without looping through all
    local remoteCount = 0
    for i = 1, math.min(10, #children) do
        local child = children[i]
        if child:IsA("RemoteEvent") or child:IsA("RemoteFunction") then
            remoteCount = remoteCount + 1
            if remoteCount <= 2 then  -- Show first 2 only
                table.insert(info, "  ‚Ä¢ " .. child.Name .. " (" .. child.ClassName .. ")")
            end
        end
    end
    
    if remoteCount > 2 then
        table.insert(info, "  ‚Ä¢ ... and " .. (remoteCount - 2) .. " more remotes")
    end
    table.insert(info, "")
end

-- 5. CURRENT TOOLS/WEAPONS (if any)
table.insert(info, "CURRENT TOOLS SEARCH:")
local foundTools = {}

-- Check workspace for tools with "Gun" in name
if wsSuccess and workspace then
    local children = workspace:GetChildren()
    for i = 1, math.min(20, #children) do
        local child = children[i]
        if child:IsA("Tool") and (child.Name:find("Gun") or child.Name:find("Weapon") or child.Name:find("Tool")) then
            table.insert(foundTools, child.Name)
            if #foundTools >= 3 then break end
        end
    end
end

if #foundTools > 0 then
    table.insert(info, "Found tools: " .. table.concat(foundTools, ", "))
else
    table.insert(info, "No obvious tools found")
end

-- OUTPUT
local output = table.concat(info, "\n")
print(output)

-- TRY TO SAVE (but don't crash if it fails)
print("\n" .. string.rep("-", 40))
print("SAVING ATTEMPT...")

local saveSuccess = false

-- Method 1: setclipboard
if type(setclipboard) == "function" then
    local ok = pcall(setclipboard, output)
    if ok then
        print("‚úÖ Copied to clipboard!")
        saveSuccess = true
    end
end

-- Method 2: writefile
if not saveSuccess and type(writefile) == "function" then
    local ok = pcall(writefile, "game_info.txt", output)
    if ok then
        print("‚úÖ Saved to game_info.txt")
        saveSuccess = true
    end
end

-- Method 3: rconsoleprint (if available)
if not saveSuccess and type(rconsoleprint) == "function" then
    pcall(rconsoleprint, output)
    print("‚úÖ Printed to console")
    saveSuccess = true
end

if not saveSuccess then
    print("‚ö†Ô∏è  Could not save automatically")
    print("üìã Please MANUALLY copy the text above")
end

print("\n" .. string.rep("=", 40))
print("SCAN COMPLETE!")
print("Lines: " .. (#info))
print(string.rep("=", 40))
